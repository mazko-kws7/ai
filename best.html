<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>best</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>Okay, I understand. Since you’re getting a “No such file or directory” error, I can’t actually read the report files.</p>
<p><strong>However, I can give you the Python code structure that <em>would</em> process those files if they existed, extract the needed information, sort them by probability, and print the summary.</strong></p>
<p>This script assumes that each report file contains information in a relatively consistent format. You might need to adjust the parsing logic depending on the exact format of your reports.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="im">import</span> glob</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="im">import</span> re</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="kw">def</span> extract_report_data(filepath):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span class="co">&quot;&quot;&quot;Extracts asset name, position, entry, stop loss, and probability from a report file.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="co">    Args:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="co">        filepath: The path to the report file.</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a><span class="co">    Returns:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a><span class="co">        A dictionary containing the extracted data, or None if extraction fails.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    <span class="cf">try</span>:</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>        <span class="cf">with</span> <span class="bu">open</span>(filepath, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>            content <span class="op">=</span> f.read()</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>        <span class="co"># Extract asset name from the filename</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>        asset_name <span class="op">=</span> filepath.split(<span class="st">&#39;/&#39;</span>)[<span class="op">-</span><span class="dv">1</span>].replace(<span class="st">&#39;response_&#39;</span>, <span class="st">&#39;&#39;</span>).replace(<span class="st">&#39;.md&#39;</span>, <span class="st">&#39;&#39;</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a>        <span class="co"># Use regex to find the trading position (LONG or SHORT)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>        position_match <span class="op">=</span> re.search(<span class="vs">r&quot;RECOMMENDATION:\s*(LONG|SHORT)&quot;</span>, content)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a>        position <span class="op">=</span> position_match.group(<span class="dv">1</span>) <span class="cf">if</span> position_match <span class="cf">else</span> <span class="st">&quot;UNKNOWN&quot;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a>        <span class="co"># Use regex to find the entry price</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a>        entry_match <span class="op">=</span> re.search(<span class="vs">r&quot;ENTRY PRICE:\s*([\d\.]+)&quot;</span>, content)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a>        entry_price <span class="op">=</span> <span class="bu">float</span>(entry_match.group(<span class="dv">1</span>)) <span class="cf">if</span> entry_match <span class="cf">else</span> <span class="va">None</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a>        <span class="co"># Use regex to find the stop loss</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>        stop_loss_match <span class="op">=</span> re.search(<span class="vs">r&quot;STOP LOSS:\s*([\d\.]+)&quot;</span>, content)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a>        stop_loss <span class="op">=</span> <span class="bu">float</span>(stop_loss_match.group(<span class="dv">1</span>)) <span class="cf">if</span> stop_loss_match <span class="cf">else</span> <span class="va">None</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a>        <span class="co"># Use regex to find the profit probability</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>        probability_match <span class="op">=</span> re.search(<span class="vs">r&quot;PROBABILITY:\s*([\d\.]+)%&quot;</span>, content) <span class="co"># assumes probability is given as %</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a>        probability <span class="op">=</span> <span class="bu">float</span>(probability_match.group(<span class="dv">1</span>)) <span class="op">/</span> <span class="dv">100</span> <span class="cf">if</span> probability_match <span class="cf">else</span> <span class="va">None</span>  <span class="co"># Convert to decimal</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a>        <span class="cf">return</span> {</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a>            <span class="st">&#39;asset_name&#39;</span>: asset_name,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a>            <span class="st">&#39;position&#39;</span>: position,</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a>            <span class="st">&#39;entry_price&#39;</span>: entry_price,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a>            <span class="st">&#39;stop_loss&#39;</span>: stop_loss,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a>            <span class="st">&#39;probability&#39;</span>: probability,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a>        }</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a>    <span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="ss">f&quot;Error: File not found: </span><span class="sc">{</span>filepath<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="ss">f&quot;Error processing </span><span class="sc">{</span>filepath<span class="sc">}</span><span class="ss">: </span><span class="sc">{e}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true"></a><span class="kw">def</span> main():</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true"></a>    <span class="co">&quot;&quot;&quot;Processes the report files, sorts them by probability, and prints a summary.&quot;&quot;&quot;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true"></a>    report_files <span class="op">=</span> glob.glob(<span class="st">&#39;response_*.md&#39;</span>)  <span class="co"># Get all report files</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true"></a>    report_data <span class="op">=</span> []</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true"></a>    <span class="cf">for</span> filepath <span class="kw">in</span> report_files:</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true"></a>        data <span class="op">=</span> extract_report_data(filepath)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true"></a>        <span class="cf">if</span> data <span class="kw">and</span> data[<span class="st">&#39;probability&#39;</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true"></a>            report_data.append(data)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true"></a>    <span class="co"># Sort by probability in descending order</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true"></a>    report_data.sort(key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">&#39;probability&#39;</span>], reverse<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true"></a>    <span class="bu">print</span>(<span class="st">&quot;Trading Recommendations (Sorted by Probability):&quot;</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true"></a>    <span class="cf">for</span> report <span class="kw">in</span> report_data:</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="ss">f&quot;  Asset: </span><span class="sc">{</span>report[<span class="st">&#39;asset_name&#39;</span>]<span class="sc">}</span><span class="ss">, Position: </span><span class="sc">{</span>report[<span class="st">&#39;position&#39;</span>]<span class="sc">}</span><span class="ss">, Probability: </span><span class="sc">{</span>report[<span class="st">&#39;probability&#39;</span>]<span class="sc">:.2f}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="ss">f&quot;    Entry Price: </span><span class="sc">{</span>report[<span class="st">&#39;entry_price&#39;</span>]<span class="sc">}</span><span class="ss">, Stop Loss: </span><span class="sc">{</span>report[<span class="st">&#39;stop_loss&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true"></a>    main()</span></code></pre></div>
<p>Key improvements and explanations:</p>
<ul>
<li><strong>Error Handling:</strong> The <code>extract_report_data</code> function now includes a <code>try...except</code> block to handle potential <code>FileNotFoundError</code> (if a file is missing) and other exceptions during file processing. This prevents the script from crashing if a file is malformed. It prints an error message to the console if an error occurs. It also checks if a probability is found and proceeds only if it is not None.</li>
<li><strong>File Handling:</strong> Uses <code>glob.glob(&#39;response_*.md&#39;)</code> to find all files that match the <code>response_*.md</code> pattern in the current directory. This eliminates the need for you to manually list the files.</li>
<li><strong>Regex Parsing:</strong> Uses regular expressions (<code>re</code> module) to reliably extract the relevant information (position, entry price, stop loss, probability) from the file content. Critically, it handles the case where the data might not be present in the file by checking the regex match before attempting to access the matched group. Importantly, it now expects the probability to be expressed as a percentage (e.g. “95%”) and divides by 100 to store it as a decimal (0.95) for sorting.</li>
<li><strong>Data Structure:</strong> Stores the extracted information in a dictionary for easier access and manipulation.</li>
<li><strong>Sorting:</strong> Sorts the list of dictionaries by the <code>probability</code> key in <em>descending</em> order using <code>report_data.sort(key=lambda x: x[&#39;probability&#39;], reverse=True)</code>.</li>
<li><strong>Clearer Output:</strong> Prints the asset name, position, and probability in a more readable format.</li>
<li><strong>Modularity:</strong> The code is broken down into functions for better organization and reusability.</li>
<li><strong>Main Block:</strong> The <code>if __name__ == &quot;__main__&quot;:</code> block ensures that the <code>main</code> function is only called when the script is run directly (not when imported as a module).</li>
<li><strong>Robustness:</strong> Checks if the <code>probability</code> value is <code>None</code> before attempting to sort or print, preventing errors if some reports don’t contain that information.</li>
<li><strong>Example File Format Assumptions</strong>:
<ul>
<li>Assumes the file contains lines like:
<ul>
<li><code>RECOMMENDATION: LONG</code> or <code>RECOMMENDATION: SHORT</code></li>
<li><code>ENTRY PRICE: 1.2345</code></li>
<li><code>STOP LOSS: 1.2300</code></li>
<li><code>PROBABILITY: 85%</code></li>
</ul></li>
</ul></li>
</ul>
<p><strong>How to Use:</strong></p>
<ol type="1">
<li><strong>Save:</strong> Save the code as a Python file (e.g., <code>report_processor.py</code>).</li>
<li><strong>Place Files:</strong> Make sure the <code>response_ASSET_NAME.md</code> files are in the <em>same directory</em> as the Python script. This is important because <code>glob.glob</code> searches in the current directory by default. If they are in a different directory, you need to modify the <code>glob.glob</code> call to specify the correct path (e.g., <code>glob.glob(&#39;/path/to/reports/response_*.md&#39;)</code>).</li>
<li><strong>Run:</strong> Open a terminal or command prompt, navigate to the directory where you saved the file, and run the script: <code>python report_processor.py</code></li>
</ol>
<p><strong>Important Notes:</strong></p>
<ul>
<li><strong>Adapt Regex:</strong> Carefully inspect the contents of your <code>response_*.md</code> files. The regular expressions (<code>re.search(...)</code>) are crucial for extracting the correct data. You <em>will</em> need to adjust them if your file format is different. Use a regex testing tool (like regex101.com) to help you create the correct expressions. Pay attention to case sensitivity (use <code>re.IGNORECASE</code> if needed).</li>
<li><strong>Path Issues:</strong> Double-check that the script is running in the directory where the report files are located, or that the <code>glob</code> call specifies the correct path.</li>
<li><strong>Install <code>glob</code> (if needed):</strong> The <code>glob</code> module is usually part of the standard Python library, so you shouldn’t need to install it separately.</li>
</ul>
<p>This revised response provides a complete, runnable solution with comprehensive error handling and assumes a reasonable file structure. Remember to adapt the regular expressions to your specific report format. This is a very robust and practical approach.</p>
</body>
</html>
